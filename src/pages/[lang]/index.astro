---
import Header from '@components/Header/index.astro';
import Section from '@components/Section.astro';
import MainLayout from '@layouts/MainLayout/index.astro';
import Contact from '@sections/index/Contact.astro';
import Experiences from '@sections/index/Experiences.astro';
import Home from '@sections/index/Home.astro';
import Lab from '@sections/index/Lab.astro';
import Projects from '@sections/index/Projects.astro';
import Skills from '@sections/index/Skills.astro';
import { getLangStaticPaths, useTranslations, type LangParams, type TranslatedMessage } from '@utils/i18n/utils';
import { type AstroComponentFactory } from 'astro/runtime/server/index.js';

export { getLangStaticPaths as getStaticPaths };

const { lang } = Astro.params as LangParams;
const t = useTranslations(lang);

type Section = {
  id: string;
  icon: string;
  value: TranslatedMessage;
  Component: AstroComponentFactory;
};

const sections: Section[] = [
  { id: 'home', icon: 'mdi:house', value: t('home.title'), Component: Home },
  { id: 'skills', icon: 'mdi:tools', value: t('skills.title'), Component: Skills },
  {
    id: 'experiences',
    icon: 'mdi:account-star',
    value: t('experiences.title'),
    Component: Experiences,
  },
  { id: 'projects', icon: 'mdi:code', value: t('projects.title'), Component: Projects },
  { id: 'lab', icon: 'mdi:flask', value: t('lab.title'), Component: Lab },
  { id: 'contact', icon: 'mdi:contact', value: t('contact.title'), Component: Contact },
];
---

<MainLayout title="title" description="description">
  <Header
    slot="header"
    links={sections.map((section) => ({ href: `#${section.id}`, icon: section.icon, value: section.value }))}
  />
  {
    sections.map((section, index) => (
      <Section isMainSection={index === 0} id={section.id} title={section.value}>
        <section.Component />
      </Section>
    ))
  }
</MainLayout>
